<form
  bindvar=":"
  bindasset="apikey:api.api_key"
  method="post"
  action="{src}"
  data-header="apikey:{apikey}"
  data-success="rerun:#test"
  onformsubmit="reset"
>
  <figure class="p1 shade1 bcwhite">
    <input type="text" name="task" class="f2 p05 bos2 bw1 light" placeholder="Add task" autocomplete="off" required><p></p>
  </figure>
</form>
<div id="loader" class="loader"></div>
<div id="empty" hide>Empty =(</div>
<div
  id="test"
  class="box cards shade1 list br0- bcwhite-"
  bindvar=":"
  bindasset="apikey:api.api_key"
  data-src="{src}?order=id.desc"
  data-header="apikey:{apikey}"
  data-loader="#loader"
  data-empty="#empty"
  data-iterate="true">
  <span class="p1 aic">
    <input
      id="{id}"
      type="checkbox"
      name="done"
      value="true"
      bindvar=":"
      data-set="id:id"
      data-get="done"
      data-patch="{src}?id=eq.{id}&limit=1&order=id"
      data-header="#test"
      click="togglevalue"
      onvaluechange="data-patch"
      width="24"
      height="24"
      class="fu"
    >
    <p
      type="text"
      name="task"
      bindvar=":"
      data-set="id:id"
      data-get="task"
      data-patch="{src}?id=eq.{id}&limit=1&order=id"
      data-header="#test"
      keyboard-key="Enter"
      keyboard-action="data-patch"
      keyboard-scope
      contenteditable
      class="ml1 bs0 bw0"
    >
    </p>
    <a
      type="button"
      bindvar=":"
      data-set="id:id"
      data-delete="{src}?id=eq.{id}"
      data-header="#test"
      click="data-delete"
      class="bc0 fu fr icon24 dimgray"
    >
    &#128465;
    </a>
  </span>
</div>