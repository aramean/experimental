<form
  bindvar=":"
  bindasset="apikey:api.api_key"
  method="post"
  action="{src}"
  data-header="apikey:{apikey}"
  data-success="rerun:#test"
  onformsubmit="reset"
>
  <figure class="p1 shade1 bcwhite">
    <input type="text" name="task" class="f2 p05 bos2 bw1 light" placeholder="Add task" autocomplete="off" required><p></p>
  </figure>
</form>
<div id="loader" class="loader"></div>
<div id="empty" hide>Empty =(</div>
<div
  id="test"
  class="box cards shade1 list br0- bcwhite-"
  bindvar=":"
  bindasset="apikey:api.api_key"
  data-src="{src}?order=id.desc"
  data-header="apikey:{apikey}"
  data-loader="#loader"
  data-empty="#empty"
  data-iterate="true">
  <span class="p1 aic">
    <input
      id="{id}"
      type="checkbox"
      name="done"
      value="true"
      bindvar=":"
      data-set="id:id"
      data-get="done"
      data-patch="{src}?id=eq.{id}&limit=1&order=id"
      data-header="#test"
      click="togglevalue"
      onvaluechange="data-patch"
      width="24"
      height="24"
      class="fu"
    >
    <label data-set="id:id" for="{id}" class="ml1" data-get="task"></label>
    <input
      id="d{id}"
      type="button"
      name="del"
      bindvar=":"
      data-set="id:id"
      value="{id}"
      data-remove="{src}?id=eq.{id}"
      data-header="#test"
      click="togglevalue"
      onvaluechange="data-remove"
      width="24"
      height="24"
      class="fr"
    >
  </span>
</div>