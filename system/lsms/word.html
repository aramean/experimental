<script src="../../front/front.js"></script>
<title>Word</title>
<template srcdoc="../index" src="../templates/main"></template>
<section bindquery="i:i" bindasset="endpoint:api.words.endpoint" data-src="{endpoint}&column=id,lang_code,word&where=meaning_id.eq({i})">

  <hr class="bcblack01 mt1">
    <div class="box" bgcolor="white" width="100%">
      <details class="accordion shade1" flexdirection="column" width="100%" open>
        <summary globalize-get iconopen="⊖" iconclosed="⊕" iconsize="24" bold>Translations</summary>
        <div class="box cards p1- grid xxs_gtc1 xs_gtc2 sm_gtc3 xl_gtc4 xxl_gtc5 xxxl_gtc6" width="unset"
          data-iterate="true" padding="1rem" id="to">
          <form method="put" bindasset="endpoint2:api.words.endpoint" data-set="id:id;lang_code:lang_code" id="edit{lang_code}"
            action="{endpoint2}&where=id.eq({id}),lang_code.eq({lang_code})" 
            data-onsuccess="alert:[Saved]"
            data-onerror="alert:[Error]"
            disabled-onsubmitted="alert:[Saved];blur">
            <figure width="unset">
                <small data-get="lang_code">[iso]</small>
                <input type="text" class="bs1 w100p p1 h3 br05"
                  data-set="lang_code:lang_code"
                  data-get="word"
                  name="word"
                  keyboard-key="Enter"
                  keyboard-action="submit:#edit{lang_code}:[#edit{lang_code}]"
                  keyboard-scope
                  autocomplete="off"
                  required>
              </figure>
            </form>
        </div>
      </details>
    </div>
</section>
<hr>
<section>
  <div class="p1 shade1 br05 mb1">
    <label class="fs09" bold>Add more translations</label>
    <div class="ml0 pr f1">
      <ul storage-bind="local:dictionaryLanguage" storage-iterate="languages" flex flexdirection="column"
        paddingtop="1rem" storage-onempty="#no-languages">
        <li mouseover="bgcolor:[whitesmoke]" mouseout="bgcolor:[inherit]">
          <span storage-get="name" class="f1" flex="1"></span>
          <button padding="0.5rem 1rem"
            storage-set="name:name;iso:iso"
            click="setvalue:#iso:[{iso}];setvalue:#language:[{name}];remove:#"
            onclicked="append:#to:#from">Add</button>
        </li>
      </ul>
      <div id="no-languages" hide>
        No languages added. <a href="settings.html">Manage Dictionary Languages</a>
      </div>
      <input type="hidden" id="iso">
      <input type="hidden" id="language">
    </div>
  </div>
  <div id="from" hide stop="*">
    <form
      method="post" 
      bindappend="#iso:iso"
      id="editnew{iso}"
      bindasset="endpoint3:api.words.endpoint"
      action="{endpoint3}"
      bindquery="i:i" value="{i}"
      data-onerror="alert:[something went wrong]"
      data-onsuccess="setattr:#to #editnew{iso}:[method][disabled];setattr:#to #editnew{iso}:[action][{endpoint3}&where=id.eq({i}),lang_code.eq({iso})]"
    >
      <figure>
        <small bindappend="#iso:iso">{iso}</small>
        <input type="text" class="phdark bs1 br05" height="3rem" width="100%" padding="1rem"
          bindappend="#language:e;#iso:iso"
          placeholder="Word in {e}"
          name="word"
          keyboard-key="Enter"
          keyboard-action="alert:[You pressed enter {iso}.]"
          keyboard-scope
          autocomplete="off"
          required>
          <input type="hidden" name="meaning_id" bindquery="i:i" value="{i}">
          <input type="hidden" name="lang_code" bindappend="#iso:iso" value="{iso}">
      </figure>
    </form>
  </div>
</section>